{% extends 'base.html' %}
{% block content %}

<p>You have:</p>

{% if videos %}
	<canvas id="levelbarchart"></canvas>
	{% for entry in category_levels %}
	You're level {{ entry.level_number }} in {{ entry.point_category }} with {{ entry.user_total_points }} points! <br>

	{% endfor %}

	<p>Your progress over time :)</p>
	<canvas id="progressChart"></canvas>
{% else %}
You don't have any videos yet. Would you like to complete some <a href="/challenge">challenges</a>?

{% endif %}

<br><br>

{% for video in videos %}
	<!-- <div class='video' style="width:25%"> -->
	<div class='container-fluid video'>

	Added:
  {{ video.date_uploaded.strftime("%A") }} at {{ video.date_uploaded.strftime("%I") }}:{{ video.date_uploaded.strftime("%M") }}<br>

  
{% for object in video.video_challenge %}
Challenge: <a href="challenge/{{ object.challenge_name }}">{{ object.challenge_name }}</a>
<br>
{% endfor %}

  This video is:<br>
	 {% for tag_object in video.video_tag %}
	 <span class='tag'><a href="/tags/{{tag_object.tag_name}}">{{ tag_object.tag_name }}!</a></span>
	 {% endfor %} 
 <br>
<!-- <video width="320" height="240" controls> -->
<video width="80%" controls>
<!-- <video class='video' controls> -->


	<source src="/static/uploads/{{ video.filename }}" type="video/{{ video.filename.split('.', 1)[1] }}">

	Your browser doesn't support videos. Consider upgrading to a newer version.
</video>
<br>
<a href="/video-upload/{{ video.filename }}">See Details</a>!<br>

{% for entry in video.video_point_totals %}
	{% if entry.point_category != 'completion' %}


		 <span id='{{ entry.point_category }}_{{ video.video_id }}_score'>{{ entry.total_points }} </span>
				<button class ='{{ entry.point_category }}' id='{{ entry.point_category }}_{{ video.video_id }}' disabled>{{ entry.point_category }} 
				</button>

	{% endif %}
{% endfor %}

 <br><br><br>

</div>
</div>
{% endfor %}

<script src="/static/js/levelChart.js"></script>
<script src="/static/js/progressChart.js"></script>

{% endblock %}